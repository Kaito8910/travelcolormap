{% extends "base.html" %}
{% block title %}宿泊検索{% endblock %}

{% block main_content %}
<div class="register-container">
    <h1>宿泊検索</h1>

    <form action="/stay_search_results" method="GET">

        <label>都道府県を選択</label>
        <select name="small" required>
            <option value="">選択してください</option>

            {% for p in prefectures %}
                <option value="{{ p.small }}"
                        data-large="{{ p.large }}"
                        data-middle="{{ p.middle }}">
                    {{ p.name }}
                </option>
            {% endfor %}
        </select>

        <!-- hidden で large/middle を送る -->
        <input type="hidden" name="large" id="large">
        <input type="hidden" name="middle" id="middle">

        <script>
            // small を選択したら large と middle も自動で入る
            document.querySelector("select[name='small']").addEventListener("change", function () {
                let selected = this.options[this.selectedIndex];
                document.getElementById("large").value = selected.dataset.large;
                document.getElementById("middle").value = selected.dataset.middle;
            });
        </script>

        <label>チェックイン</label>
        <input type="date" name="checkin_date" value="{{ today }}" required>

        <label>チェックアウト</label>
        <input type="date" name="checkout_date" value="{{ tomorrow }}" required>

        <label>大人の人数</label>
        <input type="number" name="adults" value="1" min="1" max="10">

        <button type="submit">検索する</button>
    </form>
</div>
{% endblock %}
