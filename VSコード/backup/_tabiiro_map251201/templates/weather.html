{% extends "base.html" %}

{% block title %}
    å¤©æ°—äºˆå ± | æ—…è‰²ãƒãƒƒãƒ—
{% endblock %}

{% block main_content %}
<div class="weather-page" style="max-width:900px; margin:0 auto; padding:20px;">

    <h1 style="text-align:center;">ğŸŒ¤ å¤©æ°—äºˆå ±ï¼ˆOpen-Meteoï¼‰</h1>

    <!-- ãƒ•ã‚©ãƒ¼ãƒ  -->
    <form method="POST" action="{{ url_for('weather') }}" style="text-align:center; margin-bottom:25px;">
        <select name="prefecture" required style="padding:8px; font-size:1em;">
            <option value="">éƒ½é“åºœçœŒã‚’é¸æŠ</option>
            {% for pref in prefectures %}
                <option value="{{ pref }}">{{ pref }}</option>
            {% endfor %}
        </select>
        <button type="submit" style="padding:8px 12px; font-size:1em;">æ¤œç´¢</button>
    </form>

    {% if error %}
        <p style="color:red; text-align:center;">{{ error }}</p>
    {% endif %}

    <!-- ç¾åœ¨ã®å¤©æ°—ã‚«ãƒ¼ãƒ‰ -->
    {% if weather %}
        <div style="
            background:#fff;
            padding:20px;
            border-radius:12px;
            box-shadow:0 3px 7px rgba(0,0,0,0.15);
            margin-bottom:25px;
        ">
            <h2 style="margin-top:0;">{{ weather.city_name }}ï¼ˆç¾åœ¨ï¼‰</h2>
            <p style="font-size:2em;">{{ weather.icon }}</p>
            <p><strong>æ°—æ¸©ï¼š</strong> {{ weather.temp }}â„ƒ</p>
        </div>
    {% endif %}

    <!-- é€±é–“äºˆå ± -->
    {% if weekly %}
        <h2 style="margin-top:40px;">é€±é–“å¤©æ°—</h2>

        <div style="
            display:flex;
            gap:10px;
            overflow-x:auto;
            padding-bottom:10px;
        ">
            {% for day in weekly %}
            <div style="
                min-width:130px;
                background:white;
                padding:15px;
                border-radius:10px;
                text-align:center;
                box-shadow:0 2px 6px rgba(0,0,0,0.1);
            ">
                <div style="font-weight:bold; margin-bottom:5px;">
                    {{ day.date }}
                </div>
                <div style="font-size:2em; margin-bottom:10px;">
                    {{ day.icon }}
                </div>
                <div><strong>æœ€é«˜</strong>ï¼š{{ day.max }}â„ƒ</div>
                <div><strong>æœ€ä½</strong>ï¼š{{ day.min }}â„ƒ</div>
                <div><strong>é™æ°´ç¢ºç‡</strong>ï¼š{{ day.precip }}%</div>
            </div>
            {% endfor %}
        </div>
    {% endif %}

    <div style="text-align:center; margin-top:20px;">
        <a href="{{ url_for('home') }}">ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</a>
    </div>

</div>
{% endblock %}
