<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}æ—…è‰²ãƒãƒƒãƒ—{% endblock %}</title>

    <!-- ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ -->
    <link rel="icon" href="{{ url_for('static', filename='images/favicon.png') }}">

    <!-- CSSã®å‚ç…§ -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
    <div class="page-layout">
        <div class="page-left">
            <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <header class="header-section">
                <div class="app-title">
                    <a href="{{ url_for('home') }}" class="home-link">
                        <img src="{{ url_for('static', filename='images/tabiiro_rogo.png') }}" 
                            alt="æ—…è‰²ãƒãƒƒãƒ—ãƒ­ã‚´" class="app-logo">
                    </a>
                </div>
            </header>
            
            <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é ˜åŸŸ -->
            <main class="main-content-area">
                {% block main_content %}
                {% endblock %}
            </main>
        </div>

        <!-- å³å´ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼/ã‚µã‚¤ãƒ‰ãƒãƒ¼éƒ¨åˆ† -->
        <aside class="page-right-sidebar is-closed" id="menu-sidebar">
            <!-- ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚¢ã‚¤ã‚³ãƒ³ -->
            <div class="menu-icon-container">
                <div class="menu-icon" id="menu-toggle-button">&#x2261;</div>
            </div>
            
            <!-- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒªã‚¹ãƒˆ -->
            <nav class="menu-nav" id="menu-list-container">
                <ul class="menu-list">
                    <li><a href="{{ url_for('spot_list') }}">è¦³å…‰ç™»éŒ²ä¸€è¦§</a></li>
                    <li><a href="{{ url_for('gourmet_list') }}">ã‚°ãƒ«ãƒ¡è¨˜éŒ²ä¸€è¦§</a></li>
                    <li><a href="{{ url_for('hotel_search') }}">å®¿æ³Šæ¤œç´¢</a></li>
                    <li><a href="{{ url_for('event_search') }}">ã‚¤ãƒ™ãƒ³ãƒˆæ¤œç´¢</a></li>
                    <li><a href="{{ url_for('spot_search') }}">ã‚¹ãƒãƒƒãƒˆæ¤œç´¢</a></li>
                    <li><a href="{{ url_for('weather') }}">å¤©æ°—äºˆå ±</a></li>
                    <li><a href="{{ url_for('bookmark_list') }}">ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ä¸€è¦§</a></li>
                    <li><a href="{{ url_for('user_data') }}">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±</a></li>
                    {% if session.get('logged_in') %}
                        <li><a href="{{ url_for('logout') }}">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a></li>
                    {% else %}
                        <li><a href="{{ url_for('login') }}">ãƒ­ã‚°ã‚¤ãƒ³</a></li>
                    {% endif %}
                </ul>
            </nav>

            {% block sidebar_content %}
            {% endblock %}
        </aside>
    </div>

    {% block scripts %}
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const sidebar = document.getElementById('menu-sidebar');
                const toggleButton = document.getElementById('menu-toggle-button');
                const currentPage = "{{ request.endpoint }}";

                function updateSidebarState() {
                    const isMobile = window.innerWidth < 900;

                    if (isMobile) {
                        // ğŸ“± ã‚¹ãƒãƒ›ã¯å¸¸ã«é–‰ã˜ã‚‹
                        sidebar.classList.add('is-closed');
                    } else {
                        // ğŸ’» PCãªã‚‰ home ã®ã¨ãã ã‘é–‹ã
                        if (currentPage === "home") {
                            sidebar.classList.remove('is-closed');
                        } else {
                            sidebar.classList.add('is-closed');
                        }
                    }
                }

                // åˆæœŸè¨­å®š
                updateSidebarState();

                // ãƒªã‚µã‚¤ã‚ºæ™‚ã«å†åˆ¤å®š
                window.addEventListener('resize', updateSidebarState);

                // ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ“ä½œ
                toggleButton.addEventListener('click', () => {
                    sidebar.classList.toggle('is-closed');
                });
            });
        </script>


    {% endblock %}
<script src="{{ url_for('static', filename='js/bookmark.js') }}"></script>
</body>
</html>
