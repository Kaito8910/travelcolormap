{% extends "base.html" %}
{% block title %}ã‚¤ãƒ™ãƒ³ãƒˆæ¤œç´¢çµæœ | æ—…è‰²ãƒãƒƒãƒ—{% endblock %}

{% block main_content %}
<div class="register-container">

    <h1>ã‚¤ãƒ™ãƒ³ãƒˆæ¤œç´¢çµæœï¼ˆ{{ results|length }}ä»¶ï¼‰</h1>

    <!-- ğŸ”„ å†æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ  -->
    <form method="GET" action="{{ url_for('event_search_results') }}">

        <label>éƒ½é“åºœçœŒ</label>
        <select name="prefecture">
            <option value="">ã™ã¹ã¦</option>
            {% for pref in prefectures %}
                <option value="{{ pref }}" {% if request.args.get('prefecture') == pref %}selected{% endif %}>
                    {{ pref }}
                </option>
            {% endfor %}
        </select>

        <br><br>

        <label>æœˆ</label>
        <select name="month">
            <option value="">ã™ã¹ã¦</option>
            {% for m in months %}
                <option value="{{ m }}" {% if request.args.get('month') == m|string %}selected{% endif %}>
                    {{ m }}æœˆ
                </option>
            {% endfor %}
        </select>

        <br><br>

        <label>é–‹å‚¬æ™‚æœŸ</label>
        <select name="period">
            <option value="">ã™ã¹ã¦</option>
            <option value="ä¸Šæ—¬" {% if request.args.get('period') == "ä¸Šæ—¬" %}selected{% endif %}>ä¸Šæ—¬</option>
            <option value="ä¸­æ—¬" {% if request.args.get('period') == "ä¸­æ—¬" %}selected{% endif %}>ä¸­æ—¬</option>
            <option value="ä¸‹æ—¬" {% if request.args.get('period') == "ä¸‹æ—¬" %}selected{% endif %}>ä¸‹æ—¬</option>
        </select>

        <br><br>

        <label>ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</label>
        <input type="text" name="keyword" value="{{ request.args.get('keyword', '') }}">

        <br><br>
        <button type="submit">å†æ¤œç´¢</button>
    </form>

    <hr>

    <!-- ğŸ”½ æ¤œç´¢çµæœä¸€è¦§ -->
    {% if results %}
        <ul>
            {% for ev in results %}
                <li>
                    <strong>{{ ev.event_name }}</strong><br>
                    é–‹å‚¬ï¼š{{ ev.month }}<br>
                    éƒ½é“åºœçœŒï¼š{{ ev.pref_name }}<br>
                    å¸‚åŒºç”ºæ‘ï¼š{{ ev.city }}<br>
                    ã‚«ãƒ†ã‚´ãƒªï¼š{{ ev.category }}<br>
                    èª¬æ˜ï¼š{{ ev.description }}<br>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>è©²å½“ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
    {% endif %}

    <br>
    <a href="{{ url_for('event_search') }}">æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ ã«æˆ»ã‚‹</a>

</div>
{% endblock %}
