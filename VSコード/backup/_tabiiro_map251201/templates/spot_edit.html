{% extends "base.html" %}

{% block title %}観光地編集 | 旅色マップ{% endblock %}

{% block main_content %}
<div class="edit-container">
    <h1>観光地編集</h1>

    <!-- フラッシュ -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <p class="flash-message {{ category }}">{{ message }}</p>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <form method="POST" enctype="multipart/form-data" class="edit-form">

        <!-- 観光地名 -->
        <div class="form-group">
            <label>観光地名</label>
            <input type="text" name="spot_name" value="{{ spot.name }}" required>
        </div>

        <!-- 都道府県 -->
        <div class="form-group">
            <label>都道府県</label>
            <select name="prefecture" required>
                {% for p in [
                    "北海道","青森県","岩手県","宮城県","秋田県","山形県","福島県",
                    "茨城県","栃木県","群馬県","埼玉県","千葉県","東京都","神奈川県",
                    "新潟県","富山県","石川県","福井県","山梨県","長野県","岐阜県",
                    "静岡県","愛知県","三重県","滋賀県","京都府","大阪府","兵庫県",
                    "奈良県","和歌山県","鳥取県","島根県","岡山県","広島県","山口県",
                    "徳島県","香川県","愛媛県","高知県","福岡県","佐賀県","長崎県",
                    "熊本県","大分県","宮崎県","鹿児島県","沖縄県"
                ] %}
                    <option value="{{ p }}" {% if spot.prefecture == p %}selected{% endif %}>
                        {{ p }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <!-- 訪問日 -->
        <div class="form-group">
            <label>訪問日</label>
            <input type="date" name="visit_date" value="{{ spot.visit_date }}" required>
        </div>

        <!-- 写真 -->
        <div class="form-group">
            <label>写真（変更する場合のみ選択）</label>
            <input type="file" name="photo" accept="image/*">
        </div>

        <!-- コメント -->
        <div class="form-group">
            <label>コメント</label>
            <textarea name="comment">{{ spot.comment }}</textarea>
        </div>

        <button type="submit" class="save-button">保存</button>
        <a href="{{ url_for('spot_detail', spot_id=spot.spot_id) }}" class="cancel-button">キャンセル</a>
    </form>
</div>
{% endblock %}
