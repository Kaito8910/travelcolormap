<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}旅色マップ{% endblock %}</title>
    <!-- CSSの参照: Jinja2/Flaskで正しいurl_forを使用 -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="page-layout">
        <div class="page-left">
            <!-- ヘッダーセクション -->
            <header class="header-section">
                <div class="app-title">旅色マップ</div>
            </header>
            
            <!-- メインコンテンツ領域 -->
            <main class="main-content-area">
                {% block main_content %}
                {% endblock %}
            </main>
        </div>

        <!-- 右側のメニュー/サイドバー部分: IDを付与 -->
        <aside class="page-right-sidebar" id="menu-sidebar">
            <!-- ハンバーガーメニューアイコンのコンテナ -->
            <div class="menu-icon-container">
                <!-- アイコンにIDを付与 -->
                <div class="menu-icon" id="menu-toggle-button">&#x2261;</div>
            </div>
            
            <!-- メニューリスト: IDを付与 -->
            <nav class="menu-nav" id="menu-list-container">
                <ul class="menu-list">
                    <!-- リンク先をapp.pyの関数名に合わせる (url_for('travel_record')) -->
                    <li><a href="{{ url_for('travel_record') }}">旅行先記録</a></li>
                    <li><a href="{{ url_for('gourmet_record') }}">グルメ記録</a></li>
                    <li><a href="{{ url_for('stay_search') }}">宿泊検索</a></li>
                    <li><a href="{{ url_for('event_search') }}">イベント検索</a></li>
                    <!-- ⚠️ 修正箇所: 'user-data' を 'user_data' に変更 -->
                    <li><a href="{{ url_for('user_data') }}">アカウント情報</a></li>
                    <li><a href="{{ url_for('logout') }}">ログアウト</a></li>
                </ul>
            </nav>

            {% block sidebar_content %}
            {% endblock %}
        </aside>
    </div>

    {% block scripts %}
        <!-- トグル機能用のJavaScript -->
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const toggleButton = document.getElementById('menu-toggle-button');
                const sidebar = document.getElementById('menu-sidebar');
                
                if (toggleButton && sidebar) {
                    toggleButton.addEventListener('click', function() {
                        // sidebar 要素に 'is-closed' クラスを追加/削除する
                        sidebar.classList.toggle('is-closed');
                    });
                }
            });
        </script>
    {% endblock %}
</body>
</html>
