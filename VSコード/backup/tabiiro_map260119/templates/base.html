<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}旅色マップ{% endblock %}</title>

    <!-- ファビコン -->
    <link rel="icon" href="{{ url_for('static', filename='images/favicon.png') }}">

    <!-- CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
    <div class="page-layout">
        <div class="page-left">
            <!-- ヘッダー -->
            <header class="header-section">
                <div class="app-title">
                    <a href="{{ url_for('home') }}" class="home-link">
                        <img src="{{ url_for('static', filename='images/tabiiro_rogo.png') }}" 
                            alt="旅色マップロゴ" class="app-logo">
                    </a>
                </div>
            </header>

            <!-- メイン -->
            <main class="main-content-area">
                {% block main_content %}{% endblock %}
            </main>
        </div>

        <!-- サイドバー -->
        <aside class="page-right-sidebar is-closed" id="menu-sidebar">
            <div class="menu-icon-container">
                <div class="menu-icon" id="menu-toggle-button">&#x2261;</div>
            </div>

            <nav class="menu-nav" id="menu-list-container">
                <ul class="menu-list">
                    <!-- 記録系 -->
                    <li class="menu-group-title">記録</li>
                    <li><a href="{{ url_for('spot.spot_list') }}">観光登録一覧</a></li>
                    <li><a href="{{ url_for('food.gourmet_list') }}">グルメ記録一覧</a></li>

                    <!-- 検索系 -->
                    <li class="menu-group-title">検索</li>
                    <li><a href="{{ url_for('hotel.hotel_search') }}">宿泊検索</a></li>
                    <li><a href="{{ url_for('event.event_search') }}">イベント検索</a></li>
                    <li><a href="{{ url_for('spot.spot_search') }}">スポット検索</a></li>
                    <li><a href="{{ url_for('weather.weather') }}">天気予報</a></li>
                    <li><a href="{{ url_for('bookmark.bookmark_list') }}">ブックマーク一覧</a></li>

                    <!-- アカウント系 -->
                    <li class="menu-group-title">アカウント</li>
                    {% if session.get('logged_in') %}
                        <li><a href="{{ url_for('user.user_data') }}">アカウント情報</a></li>
                        <li><a href="{{ url_for('auth.logout') }}">ログアウト</a></li>
                    {% else %}
                        <li><a href="{{ url_for('auth.login') }}">ログイン</a></li>
                    {% endif %}
                </ul>
            </nav>


            {% block sidebar_content %}{% endblock %}
        </aside>
    </div>

    <!-- 現在のページ名を JS へ渡す -->
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const sidebar = document.getElementById("menu-sidebar");
            sidebar.dataset.currentPage = "{{ request.endpoint }}";
        });
    </script>

    <!-- 外部 JS -->
    <script src="{{ url_for('static', filename='js/base.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bookmark.js') }}"></script>

</body>
</html>
